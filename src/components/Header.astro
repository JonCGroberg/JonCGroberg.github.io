---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE } from "../consts";
---

<header>
	<nav
		class="flex flex-row border border-x-0 border-b-1 border-neutral-200 px-8 bg-white text-neutral-800 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-100"
	>
		<div
			class="basis-full my-auto gap-2 flex text-center justify-center sm:justify-start max-w-[680px] mx-auto"
		>
			<HeaderLink href="/">About</HeaderLink>
			<HeaderLink href="/resume.pdf">Resume</HeaderLink>
			<HeaderLink href="/blog">Blog</HeaderLink>
			<div class="ml-auto flex items-center gap-3">
				<button
					type="button"
					class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 bg-white text-neutral-700 transition-colors hover:bg-neutral-100 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-200 dark:hover:bg-neutral-800"
					data-theme-toggle
					aria-label="Toggle dark mode"
					aria-pressed="false"
				>
					<svg
						class="h-5 w-5 dark:hidden"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							fill="currentColor"
							d="M21.64 13.03A9 9 0 0 1 10.97 2.36a1 1 0 0 0-1.13-1.32A10 10 0 1 0 22.96 14.2a1 1 0 0 0-1.32-1.17z"
						></path>
					</svg>
					<svg
						class="hidden h-5 w-5 dark:block"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							fill="currentColor"
							d="M12 4a1 1 0 0 1 1 1v1.5a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1zm0 12.5a1 1 0 0 1 1 1V19a1 1 0 1 1-2 0v-1.5a1 1 0 0 1 1-1zm8-4.5a1 1 0 0 1-1 1h-1.5a1 1 0 1 1 0-2H19a1 1 0 0 1 1 1zM6.5 12a1 1 0 0 1-1 1H4a1 1 0 1 1 0-2h1.5a1 1 0 0 1 1 1zm10.95-5.45a1 1 0 0 1 0 1.41l-1.06 1.06a1 1 0 1 1-1.41-1.41l1.06-1.06a1 1 0 0 1 1.41 0zM8.02 15.43a1 1 0 0 1 0 1.41l-1.06 1.06a1 1 0 1 1-1.41-1.41l1.06-1.06a1 1 0 0 1 1.41 0zm9.43 1.06a1 1 0 0 1-1.41 0l-1.06-1.06a1 1 0 1 1 1.41-1.41l1.06 1.06a1 1 0 0 1 0 1.41zM8.02 8.57a1 1 0 0 1-1.41 0L5.55 7.51a1 1 0 1 1 1.41-1.41l1.06 1.06a1 1 0 0 1 0 1.41zM12 8.25A3.75 3.75 0 1 1 8.25 12 3.75 3.75 0 0 1 12 8.25z"
						></path>
					</svg>
				</button>
				<div class="hidden sm:flex justify-end my-auto gap-5">
					<a href="https://github.com/joncgroberg">
						<span class="sr-only">Go to Jonathan Groberg's GitHub repo</span>
						<svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32"
							><path
								fill="currentColor"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
							></path></svg
						>
					</a>
					<a
						href="https://www.linkedin.com/in/jonathan-groberg/"
						class="text-blue-700 dark:text-sky-400"
					>
						<span class="sr-only">Go to Jonathan Grobers's LinkedIn</span>
						<span class="absolute flex -ml-[3px] -mt-[3px]">
							<span
								class="animate-ping absolute inline-flex h-full w-full -m-[1px] rounded-full bg-red-400 opacity-50 p-[5px]"
							></span>
							<span class="relative inline-flex rounded-full h-2 w-2 bg-red-400"
							></span>
						</span>
						<svg
							width="32"
							height="32"
							viewBox="0 0 24 24"
							aria-hidden="true"
							class="z-10"
							><path
								fill="currentColor"
								d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
							></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</nav>
</header>
<script is:inline>
	const storageKey = "theme";
	const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
	const toggle = document.querySelector("[data-theme-toggle]");
	const getStoredTheme = () => localStorage.getItem(storageKey);

	const applyTheme = (theme) => {
		const isDark = theme === "dark";
		document.documentElement.dataset.theme = theme;
		document.documentElement.style.colorScheme = theme;

		if (toggle) {
			toggle.setAttribute("aria-pressed", String(isDark));
			toggle.setAttribute(
				"title",
				isDark ? "Switch to light mode" : "Switch to dark mode"
			);
		}
	};

	const storedTheme = getStoredTheme();
	applyTheme(storedTheme || (mediaQuery.matches ? "dark" : "light"));

	if (toggle) {
		toggle.addEventListener("click", () => {
			const currentTheme = document.documentElement.dataset.theme || "light";
			const nextTheme = currentTheme === "dark" ? "light" : "dark";
			localStorage.setItem(storageKey, nextTheme);
			applyTheme(nextTheme);
		});
	}

	mediaQuery.addEventListener("change", (event) => {
		if (getStoredTheme()) {
			return;
		}
		applyTheme(event.matches ? "dark" : "light");
	});
</script>
